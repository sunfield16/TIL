## 未定義動作(Undefined Behavior)
未定義動作は、「C++の規格書で定義されていない挙動」を表す。  
そのようなコードを書いた場合、どのように動くかは **定義されていない** ということ。

未定義動作が含まれるコードはコンパイラによって様々な解釈がされ、  
変な挙動をすることもあれば偶然うまく行っているように見える挙動にもなる。

## 未定義動作の例
### 配列外参照

```cpp
int main()
{
	int a[10] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
	for (i = 0; i <= 10; ++i)
	{
		if(a[i] == 15)
		{
			std::cout << "a[i] == 15" << std::endl;
			break;
		}
	}
	
	return 0;
}
```
上記のコードは配列の外を参照している。（必ず`i`が10になるまでループするため）    
コンパイラがどう解釈するかは謎であるが、よくある例としては以下のようになる。

1.  `a[10]` にアクセスすることはないと仮定する（配列外を参照するコードを書くわけないから）
2.  つまり、絶対にif文の内部を通ってbreakするはず
3.  `std::cout << "a[i] == 15" << std::endl;` を実行してbreakする

その結果、最終的にはこんな処理としてコンパイルされるかもしれない。

```cpp
int main()
{
	std::cout << "a[i] == 15" << std::endl;
	return 0;
}
```

### 符号つき整数のオーバーフロー
```cpp
bool f(int x) 
{
	// x+1 がオーバーフローして負の値になった時
	// この処理はfalseになる
	if (x > (x+1))
	{
		return false;
	}
	
	return true;
}
```

符号つきの整数の最大値に加算されたら、オーバーフローして負の数値になる…  
というようなことは定義されていない。

1. `x`が`int`の最大値だったら、`x+1`は未定義動作になる  
  （つまり、xに最大値が来ることはありえないはず）
2. であれば、if文の中には絶対入らない
3. つまりこの関数は絶対`true`になる

その結果、最終的にはこんな処理としてコンパイルされるかもしれない。

```cpp
bool f(int)
{
	return true;
}
```