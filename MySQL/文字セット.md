# 文字セット
文字セット（Character Set）は、記号（文字）とエンコーディングの組み合わせを表す。  

`SHOW CHARACTER SET`で使用可能な文字セットを確認できる。

## レパートリー
文字セットにはセット内の文字の集合を表す「レパートリー」が存在する。
レパートリーは以下の2つ。

* ASCII ... ASCII文字（Unicodeでいうと`U+0000` から `U+007F`）
* UNICODE ... `U+0000` から `U+10FFFF`までのUnicode文字
  - ASCIIの範囲を含んでいる

`ASCII`レパートリーの文字列は`UNICODE`レパートリーを含んだ文字セットに  
安全に変換できる。

## 文字セットの指定
サーバー・データベース・テーブル・カラムの 4 つのレベルで、  
文字セット（と照合順序）の設定を行える。

## デフォルト
https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html

システム変数により、デフォルトの文字セットを変更可能。

* `character_set_client` ... クライアントから送られるステートメントに対する文字セット
  - クライアントがアクセスするときにオプションで指定できる
* `character_set_database` ... デフォルトのデータベースで使用される文字セット
  - これはサーバーによって設定されるもので、手動で設定してはいけないとされている
  - MySQL5.7では非推奨の変数になった
*  `character_set_server` ... サーバーのデフォルトの文字セット
  - これを変更する場合、照合順序（`collation_server`）も合わせて設定が必要
* `character_set_connection` ... 文字リテラルと、数値→文字列の変換に使われる文字セット

# 主要な文字セット
## `utf8`
`utf8`は実際には`utf8mb3`のエイリアスとして扱われる。  
後述の理由により将来的には`utf8mb4`に変わる可能性あり。

##  `utf8mb3`
マルチバイト文字ごとに3バイトを使うutf-8の形式。  
BMPは使用可能だが補助文字はサポートされない。

現在は非推奨になっている。  
https://dev.mysql.com/doc/refman/8.0/ja/charset-unicode-utf8mb3.html

## `utf8mb4`
マルチバイト文字ごとに4バイトを使うutf-8の形式。  
こちらは補助文字も使える。

`utf8mb3`と`utf8mb4`のカラムで比較などを行う場合、  
`utf8mb4`のカラムの照合順序が適用される。
