## 本物の重複
https://qiita.com/yoshinori_hisakawa/items/25a8f2847dad2513457d#%E9%87%8D%E8%A4%87
```
>ソフトウェア開発の世界では、「重複は悪」とされる。しかし、明らかに重複していたコードが、
>変更理由が異なるために個別に進化を遂げ、数年後には両者がまるで違ったものになっていることがある。
>これは「本物の重複」ではない。
```
一見「同じ処理」に見えても、それはただの「似ている処理」であり  
全く違う仕様や概念であることは少なくない。  
つまり、**結果として同じような処理になってしまったけど扱ってる仕様は違う**ということ。

「似ている処理」を「同じ処理」として共通化してしまうと、  
変更しづらいソースコードになってしまう。

具体的には、片方の仕様が変わって処理を修正しなきゃいけない場合  
もう一方の仕様にも影響してしまうことになる。

### 例：ステータス上昇の式が似ているとき
キャラクターのレベルアップ時のステータス上昇量の計算式がパラメータごとにあるとする。  
今回はHPや攻撃力などのHP上昇量が、↓ではほぼ同じ計算式になっている。
```cpp
//上昇値 = (10 * レベルごとの攻撃力の成長カーブ値)
double riseAttack = std::ceil(10 * attackCurve);
  
//上昇値 = (10 * レベルごとのHPの成長カーブ値)
double riseHp = std::ceil(10 * hpCurve);
```
「どちらも同じ計算式だから共通処理でいい」という考えは、この場合は避けるべき。  
これらは仕様的に**偶然にも同じような計算式になった**だけであり、  
2つの計算式は**違う仕様を扱っている**ことになる。

※もし「HPと攻撃力の計算式は同じである」という仕様なら、1つの関数にするのはあり。  
（その場合は**同じ仕様を扱っている**ため）

### 例：いろんな割引が混在しているとき
https://qiita.com/MinoDriven/items/76307b1b066467cbfd6a#%E3%82%88%E3%81%8F%E3%81%82%E3%82%8B%E3%83%80%E3%83%A1%E3%81%AA%E4%BE%8B

上記の「よくあるダメな例」では、以下のようなことが行われている。

1. 通常割引（300円引き）という仕様があった
2. 夏季限定割引（300円引き）という仕様が新しく入った
3. ↑どっちも**やってることが同じ**だから、**通常割引のメソッド（300円引き）を流用**した
4. その後、**通常割引だけ**が4%引きという仕様に変わった

これは通常割引と夏季限定割引が**違う仕様**であるにもかかわらず、  
**同じ処理**として共通化してしまったパターン。

## DRY原則の本来の意味
https://qiita.com/yatmsu/items/b4a84c4ae78fd67a364c
```
DRYは「Don’t Repeat Yourself」の略語であり、Andy HuntとDave Thomasが
書籍「達人プログラマー ―システム開発の職人から名匠への道」で提唱したソフトウェア開発原則です。  
```

```
> **すべての知識はシステム内において、単一、かつ明確な、
> そして信頼できる表現になっていなければならない。**

> 何故これがDRY原則なのでしょうか？  
> DRY原則を破るということは、同じ知識を２箇所以上に記述することです。
> この場合、片方を変更するのであれば、もう片方も変更しなければならないのです。
```
「コードの重複を避ける」という意味で使われがちなDRY原則は、  
本来**システム内の知識を重複させない**という原則。

ソフトウェア内における1つの概念や仕様が、複数の箇所に重複して書かれてはいけない…  
というイメージ。  
1箇所にだけ書いて（＝クラス・関数）、それを複数箇所で使えば知識の重複にはならない。