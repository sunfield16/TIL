## xargsコマンド
標準入力から渡された引数を使って、指定したコマンドを実行する。

普通のコマンドは引数が多かったり長すぎる場合にはエラーを出してしまうことがあるが、  
`xargs`コマンドは引数を一定量ごとに分割し、何回かに分けて実行する機能がある。

そのため、`find`などの検索結果と組み合わせてファイルを処理するといった場合も  
ファイルの数を気にする必要がない。

また、オプションによりコマンドを並列実行することもできるため、場合によっては高速化も図れる。

## 基本の使い方
```bash
xargs [オプション] [実行するコマンド] [コマンドの引数]
```

基本的には、`|`(パイプ)によって他のコマンドの出力を受け取って使うパターンが多いと思われる。  
例えば下記のようにすると、現在のディレクトリ以下にあるtxtファイルを全て削除できる。
```bash
find . -name "*.txt" | xargs "rm"
```

## 引数をコマンド内に展開する
`-I`で置換文言を指定すると、実行するコマンド内に引数を展開することが可能になる。  
置換文言は自由に指定ができるが、`{}`にするのが一般的とされる。
```bash
# seqで1〜5までの数字を出力
# echoの文字列内に置換文言 {} を配置して置換する
seq 5 | xargs -I{} echo start{}end

# 出力
start1end
start2end
start3end
start4end
start5end
```

また、置換文言を複数配置すればそれらも全て置き替わる。
```bash
seq 5 | xargs -I{} echo hoge{}huga{}piyo{}

# 出力
hoge1huga1piyo1
hoge2huga2piyo2
hoge3huga3piyo3
hoge4huga4piyo4
hoge5huga5piyo5
```

## 引数に展開する行数の制限
`-L`で引数に使う行数の上限を指定できる。  
引数が1行にまとめられていたりする場合は分割されない。
```bash
# seqで1〜10までの数字を出力し、それをさらに5個ずつに区切って出力
seq 10 | xargs -L 5 "echo"

# 出力
1 2 3 4 5
6 7 8 9 10

# 改行ではなく空白で区切ると分割実行されない
seq -s ' ' 10 | xargs -L 5 "echo"

# 出力
1 2 3 4 5 6 7 8 9 10
```

### 引数の上限指定
`-n`で引数の上限自体を指定できる。こちらは引数が1行になっていても分割される。
```bash
# seqで1〜10までの数字を出力し、それをさらに5個ずつに区切って出力
seq 10 | xargs -n 5 "echo"

# 出力
1 2 3 4 5
6 7 8 9 10

# 空白で区切っても分割して出力する
seq -s ' ' 10 | xargs -n 5 "echo"

# 出力
1 2 3 4 5
6 7 8 9 10
```


## 並列実行
`-P`に数値を指定すると、分割する際にコマンドを並列実行できる。  
デフォルトは1（並列実行しない）で、0を指定すると並列実行の制限がなくなる。

```bash
# seqで1〜20までの数字を出力し、それをさらに2個ずつに区切って出力
# （4プロセスを使って並列実行）
seq -s ' ' 20 | xargs -P 4 -n 2 "echo"

# 出力
1 2
3 4
5 6
7 8
9 10
11 12
13 14
15 16
17 18
19 20
```